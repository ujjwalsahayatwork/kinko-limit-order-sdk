"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n,r,a,i,s=require("@sushiswap/core-sdk"),o=require("@ethersproject/signing-key"),u=require("eip-712"),p=require("@ethersproject/bytes"),c=require("@ethersproject/bignumber"),d=require("@ethersproject/contracts"),y=require("@ethersproject/abi"),l=(e=require("isomorphic-unfetch"))&&"object"==typeof e&&"default"in e?e.default:e,m=require("@ethersproject/solidity"),h="https://limit-order-ffo5rqmjnq-uc.a.run.app",f=((t={})[s.ChainId.KOVAN]="0xce9365dB1C99897f04B3923C03ba9a5f80E8DB87",t[s.ChainId.MATIC]="0x1aDb3Bd86bb01797667eC382a0BC6A9854b4005f",t[s.ChainId.BSC_TESTNET]="0xC06e4dA3623EBBe88F47cE29A57234d3a2c7EF04",t[s.ChainId.AVALANCHE]="0xf6f9c9DB78AF5791A296c4bF34d59E0236E990E0",t[s.ChainId.FANTOM]="0x0dd184Bec9e43701F76d75D5FFfE246B2DC8d4EA",t[s.ChainId.ETHEREUM]="0x104734Ce12567421aC7B562e03Be2D75522cd112",t),T=((n={})[s.ChainId.MATIC]="0x8C6b2e5B8028825d371E1264f57C5CcaE0fa4D65",n[s.ChainId.BSC_TESTNET]="0xF675ea29A5C56754db70ef1bCa358F369C370F51",n[s.ChainId.AVALANCHE]="0x042c99C84b00f11A08a07AA9752E083261083A57",n[s.ChainId.FANTOM]="0x7a4f6a6Ca48Bf63C53DfF622bfa8E0DbA1c7A8c6",n[s.ChainId.ETHEREUM]="0xf4943f2dEc7E4914067CdF4120E8A322bc8f5a36",n),v=((r={})[s.ChainId.MATIC]="0xAA6370CD78A61D4e72911268D84bF1Ea6a976b77",r[s.ChainId.BSC_TESTNET]="0xF675ea29A5C56754db70ef1bCa358F369C370F51",r[s.ChainId.AVALANCHE]="0x50995361A1104B2E34d81771B2cf19BA55051C7c",r[s.ChainId.FANTOM]="0x506e3ce419976E91F2ca5BDAB96Ef253Df9dAD3b",r[s.ChainId.ETHEREUM]="0xA32e906C31093aDbe581B913e549f70fD2fD7969",r),b=((a={})[s.ChainId.MATIC]="0xe2f736B7d1f6071124CBb5FC23E93d141CD24E12",a[s.ChainId.BSC_TESTNET]="0x02F1eb39eb6c02A85C590fD4b47AF9776aFFFF45",a[s.ChainId.AVALANCHE]="0x889ec9e19C1598358899fCA4879011686c3d4045",a[s.ChainId.FANTOM]="0xBf28dD7C3B863eae035eBf535B1B214070E8ddBf",a[s.ChainId.ETHEREUM]="0x75a5263bddD871E94188611f3563aabc833Cc005",a),g=((i={})[s.ChainId.MATIC]="0x1C9B033F8C46C08EbE67F15924F5B9E97e36E0a7",i);function O(e,t,n,r,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){O(i,r,a,s,o,"next",e)}function o(e){O(i,r,a,s,o,"throw",e)}s(void 0)}))}}function E(e,t){return e(t={exports:{}},t.exports),t.exports}var x,A=E((function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=Object.create((t&&t.prototype instanceof d?t:d).prototype),i=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return{value:void 0,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var o=g(s,n);if(o){if(o===c)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function d(){}function y(){}function l(){}var m={};o(m,a,(function(){return this}));var h=Object.getPrototypeOf,f=h&&h(h(x([])));f&&f!==t&&n.call(f,a)&&(m=f);var T=l.prototype=d.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(a,i){function s(){return new t((function(r,s){!function r(a,i,s,o){var u=p(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}(a,i,r,s)}))}return r=r?r.then(s,s):s()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return y.prototype=l,o(T,"constructor",l),o(l,"constructor",y),y.displayName=o(l,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},v(b.prototype),o(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new b(u(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(T),o(T,s,"Generator"),o(T,a,(function(){return this})),o(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var o=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),C={EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],LimitOrder:[{name:"maker",type:"address"},{name:"tokenIn",type:"address"},{name:"tokenOut",type:"address"},{name:"amountIn",type:"uint256"},{name:"amountOut",type:"uint256"},{name:"recipient",type:"address"},{name:"startTime",type:"uint256"},{name:"endTime",type:"uint256"},{name:"stopPrice",type:"uint256"},{name:"oracleAddress",type:"address"},{name:"oracleData",type:"bytes32"}]},k={EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],SetMasterContractApproval:[{name:"warning",type:"string"},{name:"user",type:"address"},{name:"masterContract",type:"address"},{name:"approved",type:"bool"},{name:"nonce",type:"uint256"}]},w="LimitOrder",D=function(e,t,n){return F({types:C,primaryType:"LimitOrder",domain:{name:w,chainId:t,verifyingContract:f[t]},message:e},n)},R=function(e,t){return{types:C,primaryType:"LimitOrder",domain:{name:w,chainId:t,verifyingContract:f[t]},message:e}},L=function(e,t){return{types:k,primaryType:"SetMasterContractApproval",domain:{name:"BentoBox V1",chainId:t,verifyingContract:s.BENTOBOX_ADDRESS[t]},message:e}},S=function(e){return"0x"+u.getMessage(e,!0).toString("hex")},F=function(e,t){var n=u.getMessage(e,!0),r=new o.SigningKey(t).signDigest(n);return{v:r.v,r:r.r,s:r.s}},P=function(){var e=I(A.mark((function e(t,n,r){var a,i;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=R(t,n),e.next=3,r.send("eth_signTypedData_v4",[t.maker,JSON.stringify(a)]);case 3:return i=p.splitSignature(e.sent),e.abrupt("return",{v:i.v,r:i.r,s:i.s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=I(A.mark((function e(t,n,r){var a,i;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=L(t,n),e.next=3,r.send("eth_signTypedData_v4",[t.user,JSON.stringify(a)]);case 3:return i=p.splitSignature(e.sent),e.abrupt("return",{v:i.v,r:i.r,s:i.s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=I(A.mark((function e(t,n,r){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F({types:k,primaryType:"SetMasterContractApproval",domain:{name:"BentoBox V1",chainId:n,verifyingContract:s.BENTOBOX_ADDRESS[n]},message:t},r));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();(x=exports.OrderStatus||(exports.OrderStatus={})).FILLED="FILLED",x.CANCELLED="CANCELLED",x.EXPIRED="EXPIRED",x.PENDING="PENDING";var M=[{inputs:[{internalType:"uint256",name:"_externalOrderFee",type:"uint256"},{internalType:"contract IBentoBoxV1",name:"_bentoBox",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"feeTo",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"LogFeesCollected",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"maker",type:"address"},{indexed:!0,internalType:"bytes32",name:"digest",type:"bytes32"},{indexed:!1,internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"fillAmount",type:"uint256"}],name:"LogFillOrder",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"bytes32",name:"digest",type:"bytes32"}],name:"LogOrderCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"feeTo",type:"address"},{indexed:!1,internalType:"uint256",name:"externalOrderFee",type:"uint256"}],name:"LogSetFees",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"}],name:"LogWhiteListReceiver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"FEE_DIVISOR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"calls",type:"bytes[]"},{internalType:"bool",name:"revertOnFail",type:"bool"}],name:"batch",outputs:[{internalType:"bool[]",name:"successes",type:"bool[]"},{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"maker",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"contract IOracle",name:"oracleAddress",type:"address"},{internalType:"bytes",name:"oracleData",type:"bytes"},{internalType:"uint256",name:"amountToFill",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct StopLimitOrder.OrderArgs[]",name:"order",type:"tuple[]"},{internalType:"contract IERC20",name:"tokenIn",type:"address"},{internalType:"contract IERC20",name:"tokenOut",type:"address"},{internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"batchFillOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"maker",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"contract IOracle",name:"oracleAddress",type:"address"},{internalType:"bytes",name:"oracleData",type:"bytes"},{internalType:"uint256",name:"amountToFill",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct StopLimitOrder.OrderArgs[]",name:"order",type:"tuple[]"},{internalType:"contract IERC20",name:"tokenIn",type:"address"},{internalType:"contract IERC20",name:"tokenOut",type:"address"},{internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"batchFillOrderOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"hash",type:"bytes32"}],name:"cancelOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"}],name:"cancelledOrder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deploymentChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"externalOrderFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"",type:"address"}],name:"feesCollected",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"maker",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"contract IOracle",name:"oracleAddress",type:"address"},{internalType:"bytes",name:"oracleData",type:"bytes"},{internalType:"uint256",name:"amountToFill",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct StopLimitOrder.OrderArgs",name:"order",type:"tuple"},{internalType:"contract IERC20",name:"tokenIn",type:"address"},{internalType:"contract IERC20",name:"tokenOut",type:"address"},{internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"fillOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"maker",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"stopPrice",type:"uint256"},{internalType:"contract IOracle",name:"oracleAddress",type:"address"},{internalType:"bytes",name:"oracleData",type:"bytes"},{internalType:"uint256",name:"amountToFill",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct StopLimitOrder.OrderArgs",name:"order",type:"tuple"},{internalType:"contract IERC20",name:"tokenIn",type:"address"},{internalType:"contract IERC20",name:"tokenOut",type:"address"},{internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"fillOrderOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"orderStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permitToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeTo",type:"address"},{internalType:"uint256",name:"_externalOrderFee",type:"uint256"}],name:"setFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"}],name:"swipe",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"}],name:"swipeFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"},{internalType:"bool",name:"direct",type:"bool"},{internalType:"bool",name:"renounce",type:"bool"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ILimitOrderReceiver",name:"receiver",type:"address"}],name:"whiteListReceiver",outputs:[],stateMutability:"nonpayable",type:"function"}],N=function(){function e(e,t,n,r,a,i,o,u,p,c,d,y){void 0===o&&(o="0"),void 0===u&&(u="0x0000000000000000000000000000000000000000"),void 0===p&&(p="0x00000000000000000000000000000000000000000000000000000000000000"),void 0===c&&(c=0),void 0===d&&(d=""),void 0===y&&(y=""),this.maker=s.validateAndParseAddress(e),this.amountIn=t,this.amountOut=n,this.recipient=s.validateAndParseAddress(r),this.startTime=a.toString(),this.endTime=i.toString(),this.stopPrice=o,this.oracleAddress=s.validateAndParseAddress(u),this.oracleData=p,this.v=c,this.r=d,this.s=y}e.getLimitOrder=function(t){return new e(t.maker,s.CurrencyAmount.fromRawAmount(new s.Token(t.chainId,t.tokenIn,t.tokenInDecimals,t.tokenInSymbol),t.amountIn),s.CurrencyAmount.fromRawAmount(new s.Token(t.chainId,t.tokenOut,t.tokenOutDecimals,t.tokenOutSymbol),t.amountOut),t.recipient,t.startTime,t.endTime,t.stopPrice,t.oracleAddress,t.oracleData,t.v,t.r,t.s)};var t,n,r=e.prototype;return r.usePrice=function(t){return new e(this.maker,this.amountIn,s.CurrencyAmount.fromRawAmount(this.amountOut.currency,t.quote(this.amountIn).quotient.toString()),this.recipient,this.startTime,this.endTime,this.stopPrice,this.oracleAddress,this.oracleData)},r.signdOrderWithPrivatekey=function(e,t){var n={maker:this.maker,tokenIn:this.tokenInAddress,tokenOut:this.tokenOutAddress,amountIn:this.amountInRaw,amountOut:this.amountOutRaw,recipient:this.recipient,startTime:this.startTime,endTime:this.endTime,stopPrice:this.stopPrice,oracleAddress:this.oracleAddress,oracleData:m.keccak256(["bytes"],[this.oracleData])},r=D(n,e,t),a=r.v,i=r.r,s=r.s;return this.v=a,this.r=i,this.s=s,{v:a,r:i,s:s}},r.signOrderWithProvider=function(){var e=I(A.mark((function e(t,n){var r,a,i,s,o;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={maker:this.maker,tokenIn:this.tokenInAddress,tokenOut:this.tokenOutAddress,amountIn:this.amountInRaw,amountOut:this.amountOutRaw,recipient:this.recipient,startTime:this.startTime,endTime:this.endTime,stopPrice:this.stopPrice,oracleAddress:this.oracleAddress,oracleData:m.keccak256(["bytes"],[this.oracleData])},e.next=3,P(r,t,n);case 3:return s=(a=e.sent).r,o=a.s,this.v=i=a.v,this.r=s,this.s=o,e.abrupt("return",{v:i,r:s,s:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.getTypedData=function(){var e={maker:this.maker,tokenIn:this.tokenInAddress,tokenOut:this.tokenOutAddress,amountIn:this.amountInRaw,amountOut:this.amountOutRaw,recipient:this.recipient,startTime:this.startTime,endTime:this.endTime,stopPrice:this.stopPrice,oracleAddress:this.oracleAddress,oracleData:m.keccak256(["bytes"],[this.oracleData])};return R(e,this.chainId)},r.getTypeHash=function(){var e=this.getTypedData();return S(e)},r.send=function(){var e=I(A.mark((function e(){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(h+"/orders/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maker:this.maker,tokenIn:this.tokenInAddress,tokenOut:this.tokenOutAddress,tokenInDecimals:this.tokenInDecimals,tokenOutDecimals:this.tokenOutDecimals,tokenInSymbol:this.tokenInSymbol,tokenOutSymbol:this.tokenOutSymbol,amountIn:this.amountInRaw,amountOut:this.amountOutRaw,recipient:this.recipient,startTime:this.startTime,endTime:this.endTime,stopPrice:this.stopPrice,oracleAddress:this.oracleAddress,oracleData:this.oracleData,v:this.v,r:this.r,s:this.s,chainId:this.amountIn.currency.chainId})});case 2:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t=e,(n=[{key:"amountInRaw",get:function(){return this.amountIn.quotient.toString()}},{key:"amountOutRaw",get:function(){return this.amountOut.quotient.toString()}},{key:"tokenInAddress",get:function(){return this.amountIn.currency.address}},{key:"tokenOutAddress",get:function(){return this.amountOut.currency.address}},{key:"tokenInDecimals",get:function(){return this.amountIn.currency.decimals}},{key:"tokenOutDecimals",get:function(){return this.amountOut.currency.decimals}},{key:"tokenInSymbol",get:function(){return this.amountIn.currency.symbol||""}},{key:"tokenOutSymbol",get:function(){return this.amountOut.currency.symbol||""}},{key:"chainId",get:function(){return this.amountIn.currency.chainId}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j=function(){function e(e,t,n,r,a,i,o){void 0===o&&(o=!1),this.order=e,this.path=t.map(s.validateAndParseAddress),this.amountExternal=n,this.amountToFill=r,this.limitOrderReceiver=s.validateAndParseAddress(a),this.to=s.validateAndParseAddress(i),this.tokenIn=e.amountIn.currency.address,this.tokenOut=e.amountOut.currency.address,this.limitOrderReceiverData=y.defaultAbiCoder.encode(["address[]","uint256","address","bool"],[this.path,this.amountExternal.toString(),this.to,o])}var t=e.prototype;return t.fillOrderOpen=function(e,t){return t.open=!0,this.fillOrder(e,t)},t.fillOrder=function(){var e=I(A.mark((function e(t,n){var r,a,i,s,o,u,p,y,l,m;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.gasPrice,a=n.nonce,s=void 0!==(i=n.forceExecution)&&i,u=void 0!==(o=n.open)&&o?"fillOrderOpen":"fillOrder",p=[this.order.maker,this.order.amountInRaw,this.order.amountOutRaw,this.order.recipient,this.order.startTime,this.order.endTime,this.order.stopPrice,this.order.oracleAddress,this.order.oracleData,this.amountToFill.toString(),this.order.v,this.order.r,this.order.s],y=new d.Contract(f[this.order.chainId],M,t),m=!0,n.debug&&console.log(p,this.path,this.limitOrderReceiver,this.limitOrderReceiverData),e.prev=6,e.next=9,y.estimateGas[u](p,this.path[0],this.path[this.path.length-1],this.limitOrderReceiver,this.limitOrderReceiverData);case 9:l=(l=e.sent).mul(11).div(10),e.next=22;break;case 13:if(e.prev=13,e.t0=e.catch(6),!s){e.next=21;break}console.log("Failed to estimate gas, forcing execution"),l=c.BigNumber.from("400000"),m=!0,e.next=22;break;case 21:return e.abrupt("return",{executed:!1});case 22:return e.next=24,y.fillOrder(p,this.path[0],this.path[this.path.length-1],this.limitOrderReceiver,this.limitOrderReceiverData,{gasLimit:l,gasPrice:r,nonce:a});case 24:return e.abrupt("return",{executed:m,transaction:e.sent});case 26:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}(),e}();exports.ADVANCED_RECEIVER_ADDRESS=v,exports.DEFAULT_RECEIVER_ADDRESS=T,exports.FillLimitOrder=j,exports.LAMBDA_URL=h,exports.LIMIT_ORDER_HELPER_ADDRESS=b,exports.LimitOrder=N,exports.ROUND_UP_RECEIVER_ADDRESS=g,exports.SOCKET_URL="wss://limit-order-ffo5rqmjnq-uc.a.run.app",exports.STOP_LIMIT_ORDER_ADDRESS=f,exports.bentoTypes=k,exports.getSignature=D,exports.getSignatureBento=_,exports.getSignatureWithProvider=P,exports.getSignatureWithProviderBentobox=B,exports.getTypeHash=S,exports.getTypedData=R,exports.getTypedDataBento=L,exports.name=w,exports.types=C;
//# sourceMappingURL=limit-order-sdk.cjs.production.min.js.map
